upstream php7.0-fpm {
    server unix:/run/php/php7.0-fpm.sock;
}

server {

    listen 80;

    root /var/www/photo-blog/backend/public;

    server_name backend.server.name;

    add_header Cache-Control public;
    expires 1d;

    add_header Access-Control-Allow-Origin '*';
    add_header Access-Control-Allow-Methods 'GET, POST, DELETE, PUT, OPTIONS, HEAD';
    add_header Access-Control-Allow-Headers 'Accept, Content-Type, Authorization';

    location /api/v1/ {
        try_files /api/v1/index.php =404;
        fastcgi_pass php7.0-fpm;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }

    location ~ /\.ht {
        deny all;
    }

}
